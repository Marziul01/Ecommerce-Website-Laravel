!function(){function e(e,n,o,i,r,t,a){try{var d=e[t](a),s=d.value}catch(e){return void o(e)}d.done?n(s):Promise.resolve(s).then(i,r)}function n(n){return function(){var o=this,i=arguments;return new Promise((function(r,t){var a=n.apply(o,i);function d(n){e(a,r,t,d,s,"next",n)}function s(n){e(a,r,t,d,s,"throw",n)}d(void 0)}))}}System.register(["./app-legacy.Dbq41J9R.js"],(function(e,o){"use strict";var i,r,t,a,d,s,c;return{setters:[e=>{i=e.aR,r=e.aS,t=e.aT,a=e.aU,d=e.q,s=e.aV,c=e.ap}],execute:function(){e({b:function({targetId:e,onLoaded:n,onClosed:i,onHidden:r,onError:t,onLoggedIn:s,onReady:h,onResized:y,onRedirectUserWithEmailOnly:p,onShareCaptchaToken:m,onEmailChange:v}){const f=d((e=>{switch(e.action){case l.Closed:return null==i?void 0:i();case l.Hidden:return null==r?void 0:r();case l.Error:return null==t?void 0:t(e.message,e.apiError,e.email);case l.Loaded:return null==n?void 0:n();case l.LoggedIn:return null==s?void 0:s(e.token,e.shop_pay_access_token);case l.Ready:return null==h?void 0:h(e.phoneNumber);case l.Resized:return null==y?void 0:y(parseInt(e.height,10));case l.RedirectWithEmailOnly:return null==p?void 0:p(e.email);case l.ShareCaptchaToken:return null==m?void 0:m(e.token);case l.EmailChanged:return null==v?void 0:v(e.email,e.isUserFound)}}),[i,r,t,n,s,h,y,p,m,v]),g=a().services.payShopifyCom.url;c((()=>{const n=({data:n,origin:i})=>{if(i!==g||!n||"string"!=typeof n||!n.includes(u))return;const[r,...t]=n.split(u);if(r===o)try{const n=JSON.parse(t.join(u));(e&&n.targetId===e||!e)&&f(n)}catch(a){}};return window.addEventListener("message",n),()=>{window.removeEventListener("message",n)}}),[f,g,e])},p:function(e,n){var i;e&&(null===(i=e.contentWindow)||void 0===i||i.postMessage(function(e){return function(e,n={delimiter:u,messageKey:o}){return[n.messageKey,n.delimiter,JSON.stringify(e)].join("")}(e)}(n),"*"))}}),e("u",(()=>{const{myshopifyDomain:e}=i(),{checkoutSessionIdentifier:o}=r(),s=t(),{services:{shopServer:c}}=a(),u=d(function(){var i=n((function*({token:n,origin:i,analytics_trace_id:r}){const t=new URLSearchParams({token:n,origin:i,shopify_domain:e});o&&t.set("checkout_token",o),r&&t.set("analytics_trace_id",r);const a=new URL(s.shopPaySession(),c.url);return a.search=t.toString(),fetch(a.href,{method:"POST",keepalive:!0})}));return function(e){return i.apply(this,arguments)}}(),[o,e,s,c.url]);return{exchangeSessionTokenForCookie:u}})),e("a",(()=>{const e=i(),o=parseInt(s(e.id),10),{services:{shopServer:r}}=a();return{extendBuyerIdentity:d(n((function*(){yield fetch(new URL(`/checkout/${o}/shopify_pay/extend_buyer_identity`,r.url),{method:"GET",keepalive:!0})})),[o,r.url])}}));const o="shopify_pay",u=":";var l=(e=>(e.Closed="closed",e.EmailChanged="emailChanged",e.Error="error",e.Hidden="hidden",e.Loaded="loaded",e.LoggedIn="loggedIn",e.Ready="ready",e.RedirectWithEmailOnly="redirectWithEmailOnly",e.Resized="resized",e.ShareCaptchaToken="shareCaptchaToken",e))(l||{}),h=e("S",(e=>(e.AllowNoInitialEmail="allowNoInitialEmail",e.Create="create",e.Hidden="hidden",e.OriginChanged="originChanged",e.Ready="ready",e.CheckoutQueueToken="checkoutQueueToken",e))(h||{})),y=e("M",(e=>(e.ShopifyPayUserNotFound="shopify_pay_user_not_found",e))(y||{})),p=e("A",(e=>(e.FraudGuard="fraud_guard",e.InvalidEmail="invalid_email",e.InvalidPhone="invalid_phone",e.LimitExceeded="limit_exceeded",e.PhoneBlocked="phone_blocked",e.RecordNotFound="record_not_found",e))(p||{}))}}}))}();
