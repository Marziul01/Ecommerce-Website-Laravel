!function(){function e(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,i)}return r}function n(e,n,r,i,t,o,s){try{var a=e[o](s),l=a.value}catch(e){return void r(e)}a.done?n(l):Promise.resolve(l).then(i,t)}function r(e,n,r){return(n=function(e){var n=function(e){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}System.register(["./app-legacy.Dbq41J9R.js"],(function(i,t){"use strict";var o,s,a,l,c,p,u,d,b,m,y,f,h,v,_,g,S,P,w,E,O,F,I,U,j,k,A,L,C,B,D,T,$,x,z,R,N;return{setters:[e=>{o=e.hH,s=e.sv,a=e.bu,l=e.sw,c=e.sx,p=e.fi,u=e.aV,d=e.bn,b=e.g,m=e.s,y=e.ah,f=e.el,h=e.bE,v=e.fX,_=e.b3,g=e.z,S=e.fy,P=e.b_,w=e.k$,E=e.bN,O=e.hj,F=e.iV,I=e.aR,U=e.sy,j=e.e8,k=e.sz,A=e.kl,L=e.sA,C=e.ep,B=e.by,D=e.c,T=e.a,$=e.k1,x=e.y,z=e.L,R=e.I,N=e.l}],execute:function(){i({R:function({field:e="phone",link:n}){const r=D();return T(N,{children:[T(x,{color:"subdued",children:T($,{children:[r("phone"===e?"shop_pay_remember_me.description_html":"shop_pay_remember_me.email_description_html")," ",n]})}),T(K,{})]})},a:function(){var e;const r=d(),i=b(),s=m("session-token"),[a,l]=y(),[c,p]=y("idle"),u=o(),f=null==u||null===(e=u.orderIdentity)||void 0===e?void 0:e.id;function h(){var e;return e=function*(e){if(p("loading"),l(void 0),!s||!f)return p("failed"),l("SUBSCRIPTION_FAILED"),void i.notify(new H("Missing sessionToken or orderId"));const{data:n}=yield r.mutate(t,{variables:{sessionToken:s,orderId:f,email:e}});if(n){const{__typename:e}=null==n?void 0:n.subscribeForShippingUpdates;switch(e){case"SubscribeForShippingUpdatesSuccess":return void p("subscribed");case"SubscribeForShippingUpdatesFailure":return p("failed"),void l(null==n?void 0:n.subscribeForShippingUpdates.code);default:p("idle"),i.notify(new H("Undefined subscribeForShippingUpdates type"))}}},h=function(){var r=this,i=arguments;return new Promise((function(t,o){var s=e.apply(r,i);function a(e){n(s,t,o,a,l,"next",e)}function l(e){n(s,t,o,a,l,"throw",e)}a(void 0)}))},h.apply(this,arguments)}return{submitSubscribeForShippingUpdate:function(e){return h.apply(this,arguments)},status:c,error:a}},b:function(){var e;const n=o();if(null!=n&&null!==(e=n.orderIdentity)&&void 0!==e&&e.id)return Number(u(n.orderIdentity.id))},c:V,d:function(){const e=V(),n=Boolean(null==e?void 0:e.shopAppEligible),r=Boolean(null==e?void 0:e.shopAppQrCodeKillswitch);return n&&!r},e:function(){const e=s(),n=V();return e&&Boolean(null==n?void 0:n.installmentsHighlightEligible)},f:function(){var e;const{purchasingCompany:n}=a(),r=l(),i=c(),t=p();return i&&!(null!=t&&null!==(e=t.value)&&void 0!==e&&e.email)&&!n&&!r},u:function(){const e=f().isActive,{purchasingCompany:n}=a(),r=h(),i=v(),t=_(),o=V(),s=g().paymentLines.value,{value:l}=S(),{currentDetour:c}=P(),p=w(),u=!E(O),d=E(F),{shopPayEnabled:b}=I(),{hasSavedCreditCards:m}=U(),y=j(),{value:B}=k(),D=A().searchParams.get(L),T=C().isStandard(),$=f();if(!1===(null==p?void 0:p.shopPayOptInEnabled))return!1;if(n)return!1;if(!b)return!1;if("CustomerProfile"===(null==r?void 0:r.__typename)&&i){if(!t)return!1;if(!m)return!1}return!$.userIdentified&&(!e&&(!D&&(!B&&(!T&&((!d||null==o||!o.shopPayOrder)&&("thankYou"===(null==c?void 0:c.type)?!!l&&Y({paymentLines:l.lines,isIdealEnabledForShopPay:y,isUsdcEnabled:u,isApplePayFlagEnabled:d}):Y({paymentLines:s,isIdealEnabledForShopPay:y,isUsdcEnabled:u,isApplePayFlagEnabled:d})))))))}});const t={id:"0c62c3aaedf84bd307e1134828e5fcc88a47d83c453c97544a6cc8711e6444af",type:"mutation",name:"SubscribeForShippingUpdates",source:"mutation SubscribeForShippingUpdates($orderId:ID!,$email:String!,$sessionToken:String!){subscribeForShippingUpdates(orderId:$orderId email:$email sessionInput:{sessionToken:$sessionToken}){...on SubscribeForShippingUpdatesSuccess{__typename}...on SubscribeForShippingUpdatesFailure{code __typename}__typename}}"};class H extends Error{constructor(...e){super(...e),r(this,"name","SubscribeForShippingUpdateError")}}function V(){const n=o();if(n)return function(n){for(var i=1;i<arguments.length;i++){var t=null!=arguments[i]?arguments[i]:{};i%2?e(Object(t),!0).forEach((function(e){r(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):e(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}({},n.shopAppLinksAndResources)}const Y=({paymentLines:e,isIdealEnabledForShopPay:n,isUsdcEnabled:r,isApplePayFlagEnabled:i})=>{if(null==e||!e.length||!e[0].method)return!1;const{method:t}=e[0];var o,s,a;return"customOnsite"===t.type?Boolean((null===(o=t.paymentBrands)||void 0===o?void 0:o.includes("bogus_app_coin"))||r&&(null===(s=t.paymentBrands)||void 0===s?void 0:s.includes("usdc"))||n&&(null===(a=t.paymentBrands)||void 0===a?void 0:a.includes("ideal"))):"direct"===t.type||t.type===B.CreditCard||!(!n||"local"!==t.type||"IDEAL"!==t.name)||!(!i||"wallet"!==t.type||"APPLE_PAY"!==t.name)};function K(){const e=D();return T(x,{size:"small",color:"subdued",children:T($,{children:e("shop_pay_remember_me.terms_and_privacy_html",{privacy_href:T(Q,{}),terms_href:T(M,{})})})})}function M(){const e=D();return T(N,{children:T(z,{target:"_blank",href:"https://shop.app/terms-of-service",tone:"monochrome",accessibilityLabel:e("shop_pay_remember_me.new_window_disclaimer"),children:[e("shop_pay_remember_me.terms_of_service"),T(R,{type:"external",size:"small",display:"inline"})]})})}function Q(){const e=D();return T(N,{children:T(z,{target:"_blank",href:"https://www.shopify.com/legal/privacy/app-users",tone:"monochrome",accessibilityLabel:e("shop_pay_remember_me.new_window_disclaimer"),children:[e("shop_pay_remember_me.privacy_policy"),T(R,{type:"external",size:"small",display:"inline"})]})})}}}}))}();
